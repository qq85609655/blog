---
title: 邮件
date: 2017-06-14 16:22:36
tags:
---


Hi coder

I meet a problem about oozie when use spark action with yarn-cluster master（yarn-client is ok）;
I read this page(https://stackoverflow.com/questions/38381688/make-oozie-do-not-change-classpath-of-java-action) write by you
Oozie’s share lib I have rebuild totally, so I think the sharelib is ok.

I Want to know this problem, you solved? Or which way to instead?

The log:
``` console
    yarn logs -applicationId application_1497340444423_0484

    2017-06-14 15:51:40,019 ERROR [main] org.apache.hadoop.mapreduce.v2.app.MRAppMaster: Error starting MRAppMaster
    java.lang.NoSuchMethodError: org.apache.hadoop.yarn.webapp.util.WebAppUtils.getProxyHostsAndPortsForAmFilter(Lorg/apache/hadoop/conf/Configuration;)Ljava/util/List;
        at org.apache.hadoop.yarn.server.webproxy.amfilter.AmFilterInitializer.initFilter(AmFilterInitializer.java:40)
        at org.apache.hadoop.http.HttpServer.<init>(HttpServer.java:272)
        at org.apache.hadoop.yarn.webapp.WebApps$Builder$2.<init>(WebApps.java:222)
        at org.apache.hadoop.yarn.webapp.WebApps$Builder.start(WebApps.java:219)
        at org.apache.hadoop.mapreduce.v2.app.client.MRClientService.serviceStart(MRClientService.java:136)
        at org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)
        at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.serviceStart(MRAppMaster.java:1058)
        at org.apache.hadoop.service.AbstractService.start(AbstractService.java:193)
        at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$1.run(MRAppMaster.java:1445)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:415)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1491)
        at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.initAndStartAppMaster(MRAppMaster.java:1441)
        at org.apache.hadoop.mapreduce.v2.app.MRAppMaster.main(MRAppMaster.java:1374)
    2017-06-14 15:51:40,023 INFO [Thread-1] org.apache.hadoop.mapreduce.v2.app.MRAppMaster: MRAppMaster received a signal. Signaling RMCommunicator and JobHistoryEventHandler.
    2017-06-14 15:51:40,024 WARN [Thread-1] org.apache.hadoop.util.ShutdownHookManager: ShutdownHook 'MRAppMasterShutdownHook' failed, java.lang.NullPointerException
    java.lang.NullPointerException
        at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$ContainerAllocatorRouter.setSignalled(MRAppMaster.java:827)
        at org.apache.hadoop.mapreduce.v2.app.MRAppMaster$MRAppMasterShutdownHook.run(MRAppMaster.java:1395)
        at org.apache.hadoop.util.ShutdownHookManager$1.run(ShutdownHookManager.java:54)    
    ```

Yours friends, Kevin Lee

Best wish to you!

